.. _section-role-{{ hm_util_rolecreator__role_id }}:

Role **{{ hm_util_rolecreator__role_name }}**
================================================================================

* `Ansible Galaxy page <https://galaxy.ansible.com/{{ hm_util_rolecreator__username_galaxy }}/{{ hm_util_rolecreator__role_name_short }}>`__
* `GitHub repository <https://github.com/{{ hm_util_rolecreator__username_github }}/ansible-role-{{ hm_util_rolecreator__role_id_short }}>`__
* `Travis CI page <https://travis-ci.org/{{ hm_util_rolecreator__username_travis }}/ansible-role-{{ hm_util_rolecreator__role_id_short }}>`__

Main purpose of this role is to ...

**Table of Contents:**

* :ref:`section-role-{{ hm_util_rolecreator__role_id }}-installation`
* :ref:`section-role-{{ hm_util_rolecreator__role_id }}-dependencies`
* :ref:`section-role-{{ hm_util_rolecreator__role_id }}-usage`
* :ref:`section-role-{{ hm_util_rolecreator__role_id }}-variables`
* :ref:`section-role-{{ hm_util_rolecreator__role_id }}-files`
* :ref:`section-role-{{ hm_util_rolecreator__role_id }}-author`

This role is part of the `MSMS <https://github.com/honzamach/ansible-role-commonenv>`__
package. Some common features are documented in its :ref:`manual <section-manual>`.


.. _section-role-{{ hm_util_rolecreator__role_id }}-installation:

Installation
--------------------------------------------------------------------------------

To install the role `{{ hm_util_rolecreator__role_name }} <https://galaxy.ansible.com/{{ hm_util_rolecreator__username_galaxy }}/{{ hm_util_rolecreator__role_name_short }}>`__
from `Ansible Galaxy <https://galaxy.ansible.com/>`__ please use variation of
following command::

    ansible-galaxy install {{ hm_util_rolecreator__role_name }}

To install the role directly from `GitHub <https://github.com>`__ by cloning the
`ansible-role-{{ hm_util_rolecreator__role_id_short }} <https://github.com/{{ hm_util_rolecreator__username_github }}/ansible-role-{{ hm_util_rolecreator__role_id_short }}>`__
repository please use variation of following command::

    git clone https://github.com/{{ hm_util_rolecreator__username_github }}/ansible-role-{{ hm_util_rolecreator__role_id_short }}.git {{ hm_util_rolecreator__role_name }}

Currently the advantage of using direct Git cloning is the ability to easily update
the role when new version comes out.


.. _section-role-{{ hm_util_rolecreator__role_id }}-dependencies:

Dependencies
--------------------------------------------------------------------------------

This role is not dependent on any other role.

This role is dependent on following roles:

* :ref:`role1 <section-role-role1>`
* :ref:`role2 <section-role-role2>` *[SOFT]*

No roles have dependency on this role.

Following roles have dependency on this role:

* :ref:`role3 <section-role-role3>`
* :ref:`role4 <section-role-role4>` *[SOFT]*


.. _section-role-{{ hm_util_rolecreator__role_id }}-usage:

Usage
--------------------------------------------------------------------------------

Example content of inventory file ``inventory``::

    [servers]
    your-server

Example content of role playbook file ``role_playbook.yml``::

    - hosts: servers
      remote_user: root
      roles:
        - role: {{ hm_util_rolecreator__role_name }}
      tags:
        - role-{{ hm_util_rolecreator__role_id_short }}

Example usage::

    # Run everything:
    ansible-playbook --ask-vault-pass --inventory inventory role_playbook.yml

    # Force update of system package cache before installing any packages:
    ansible-playbook --ask-vault-pass --inventory inventory role_playbook.yml --extra-vars '{"{{ hm_util_rolecreator__role_var_prefix }}__pkgcache_force_update":true}'


.. _section-role-{{ hm_util_rolecreator__role_id }}-variables:

Configuration variables
--------------------------------------------------------------------------------


Internal role variables
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. envvar:: {{ hm_util_rolecreator__role_var_prefix }}__pkgcache_force_update

    Force update of system package cache before installing any packages.

    * *Datatype:* ``bool``
    * *Default:* ``false``

.. envvar:: `{{ hm_util_rolecreator__role_var_prefix }}__remove_packages

    List of packages related to this role that will be removed from target hosts.

	  * *Datatype:* ``dict``
    * *Default:* (please see YAML file ``defaults/main.yml``)
    * *Example:*

    .. code-block:: yaml

        {{ hm_util_rolecreator__role_var_prefix }}__remove_packages:
          debian:
            apt:
              - needrestart

.. envvar:: `{{ hm_util_rolecreator__role_var_prefix }}__install_packages

    List of packages related to this role that will be installed on target hosts.

    * *Datatype:* ``dict``
    * *Default:* (please see YAML file ``defaults/main.yml``)
    * *Example:*

    .. code-block:: yaml

        {{ hm_util_rolecreator__role_var_prefix }}__install_packages:
          debian:
            apt:
              - apt


Built-in Ansible variables
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

:envvar:`ansible_lsb['codename']`

    Linux distribution codename. It is used to generate correct APT repository URL
    and for :ref:`template customizations <section-overview-role-customize-templates>`.


.. _section-role-{{ hm_util_rolecreator__role_id }}-files:

Managed files
--------------------------------------------------------------------------------

.. note::

    This role supports the :ref:`template customization <section-overview-role-customize-templates>` feature.

This role directly manages content of following files on target system:

* ``/etc/config.json`` *[TEMPLATE]*
* ``/etc/config.ini`` *[COPY]*

This role does not manage content of any files on target system.


.. _section-role-{{ hm_util_rolecreator__role_id }}-author:

Author and license
--------------------------------------------------------------------------------

| *Copyright:* (C) since {{ ansible_date_time.year }} {{ hm_util_rolecreator__author_name }} <{{ hm_util_rolecreator__author_email }}>
| *Author:* {{ hm_util_rolecreator__author_name }} <{{ hm_util_rolecreator__author_email }}>
| Use of this role is governed by the MIT license, see LICENSE file.
|
